"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/excluirPublicacao";
exports.ids = ["pages/api/excluirPublicacao"];
exports.modules = {

/***/ "(api-node)/./middlewares/conectarMongoDB.ts":
/*!****************************************!*\
  !*** ./middlewares/conectarMongoDB.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   conectarMongoDB: () => (/* binding */ conectarMongoDB)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst conectarMongoDB = (handler)=>async (req, res)=>{\n        //verificar se o banco esta conectado. Se estiver seguir para endPoint\n        // ou proximo middleware\n        if ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().connections)[0].readyState) {\n            return handler(req, res);\n        }\n        ;\n        // ja que não está conectado seguir para conexão\n        //Obter a variavel preenchida do ENV\n        const { DB_CONEXAO_STRING } = process.env;\n        //Se a env estiver vazia aborta o uso do sistema e informa o Desenvolvedor\n        if (!DB_CONEXAO_STRING) {\n            return res.status(500).json({\n                erro: \"Erro interno de sistema, informa o DBA\"\n            });\n        }\n        mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on('connected', ()=>console.log(\"Banco de dados conectado!\"));\n        mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on('erro', (error)=>console.log(`Ocorreu erro ao conectar o Banco de dados: ${error}`));\n        await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(DB_CONEXAO_STRING);\n        //Agora pode seguir para endPoint, pois DB esta conectado \n        return handler(req, res);\n    };\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL21pZGRsZXdhcmVzL2NvbmVjdGFyTW9uZ29EQi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFDK0I7QUFHeEIsTUFBTUMsa0JBQWtCLENBQUNDLFVBQzVCLE9BQU9DLEtBQXFCQztRQUV4QixzRUFBc0U7UUFDdEUsd0JBQXdCO1FBQ3hCLElBQUlKLDZEQUFvQixDQUFDLEVBQUUsQ0FBQ00sVUFBVSxFQUFFO1lBQ3BDLE9BQU9KLFFBQVFDLEtBQUtDO1FBQ3hCOztRQUVBLGdEQUFnRDtRQUNoRCxvQ0FBb0M7UUFDcEMsTUFBTSxFQUFFRyxpQkFBaUIsRUFBRSxHQUFHQyxRQUFRQyxHQUFHO1FBQ3pDLDBFQUEwRTtRQUMxRSxJQUFJLENBQUNGLG1CQUFtQjtZQUNwQixPQUFPSCxJQUFJTSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxNQUFNO1lBQXlDO1FBQ2pGO1FBQ0FaLDBEQUFtQixDQUFDYyxFQUFFLENBQUMsYUFBYSxJQUFNQyxRQUFRQyxHQUFHLENBQUM7UUFDdERoQiwwREFBbUIsQ0FBQ2MsRUFBRSxDQUFDLFFBQVFHLENBQUFBLFFBQVNGLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDJDQUEyQyxFQUFFQyxPQUFPO1FBQ3pHLE1BQU1qQix1REFBZ0IsQ0FBQ087UUFDdkIsMERBQTBEO1FBQzFELE9BQU9MLFFBQVFDLEtBQUtDO0lBQ3hCLEVBQUMiLCJzb3VyY2VzIjpbIkM6XFxQcm9qZXRvcyBHaXRcXERldmFyaWFcXERldmFncmFtLU5vZGVcXG1pZGRsZXdhcmVzXFxjb25lY3Rhck1vbmdvREIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlLCBOZXh0QXBpSGFuZGxlciB9IGZyb20gJ25leHQnXHJcbmltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSdcclxuaW1wb3J0IHR5cGUgeyByZXNwb3N0YVBhZHJhb01zZyB9IGZyb20gJy4uL3R5cGVzL3Jlc3Bvc3RhUGFkcmFvTXNnJztcclxuXHJcbmV4cG9ydCBjb25zdCBjb25lY3Rhck1vbmdvREIgPSAoaGFuZGxlcjogTmV4dEFwaUhhbmRsZXIpID0+XHJcbiAgICBhc3luYyAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2U8cmVzcG9zdGFQYWRyYW9Nc2c+KSA9PiB7XHJcblxyXG4gICAgICAgIC8vdmVyaWZpY2FyIHNlIG8gYmFuY28gZXN0YSBjb25lY3RhZG8uIFNlIGVzdGl2ZXIgc2VndWlyIHBhcmEgZW5kUG9pbnRcclxuICAgICAgICAvLyBvdSBwcm94aW1vIG1pZGRsZXdhcmVcclxuICAgICAgICBpZiAobW9uZ29vc2UuY29ubmVjdGlvbnNbMF0ucmVhZHlTdGF0ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlcihyZXEsIHJlcyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gamEgcXVlIG7Do28gZXN0w6EgY29uZWN0YWRvIHNlZ3VpciBwYXJhIGNvbmV4w6NvXHJcbiAgICAgICAgLy9PYnRlciBhIHZhcmlhdmVsIHByZWVuY2hpZGEgZG8gRU5WXHJcbiAgICAgICAgY29uc3QgeyBEQl9DT05FWEFPX1NUUklORyB9ID0gcHJvY2Vzcy5lbnZcclxuICAgICAgICAvL1NlIGEgZW52IGVzdGl2ZXIgdmF6aWEgYWJvcnRhIG8gdXNvIGRvIHNpc3RlbWEgZSBpbmZvcm1hIG8gRGVzZW52b2x2ZWRvclxyXG4gICAgICAgIGlmICghREJfQ09ORVhBT19TVFJJTkcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJybzogXCJFcnJvIGludGVybm8gZGUgc2lzdGVtYSwgaW5mb3JtYSBvIERCQVwiIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1vbmdvb3NlLmNvbm5lY3Rpb24ub24oJ2Nvbm5lY3RlZCcsICgpID0+IGNvbnNvbGUubG9nKFwiQmFuY28gZGUgZGFkb3MgY29uZWN0YWRvIVwiKSk7XHJcbiAgICAgICAgbW9uZ29vc2UuY29ubmVjdGlvbi5vbignZXJybycsIGVycm9yID0+IGNvbnNvbGUubG9nKGBPY29ycmV1IGVycm8gYW8gY29uZWN0YXIgbyBCYW5jbyBkZSBkYWRvczogJHtlcnJvcn1gKSk7XHJcbiAgICAgICAgYXdhaXQgbW9uZ29vc2UuY29ubmVjdChEQl9DT05FWEFPX1NUUklORyk7XHJcbiAgICAgICAgLy9BZ29yYSBwb2RlIHNlZ3VpciBwYXJhIGVuZFBvaW50LCBwb2lzIERCIGVzdGEgY29uZWN0YWRvIFxyXG4gICAgICAgIHJldHVybiBoYW5kbGVyKHJlcSwgcmVzKTtcclxuICAgIH0iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJjb25lY3Rhck1vbmdvREIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiY29ubmVjdGlvbnMiLCJyZWFkeVN0YXRlIiwiREJfQ09ORVhBT19TVFJJTkciLCJwcm9jZXNzIiwiZW52Iiwic3RhdHVzIiwianNvbiIsImVycm8iLCJjb25uZWN0aW9uIiwib24iLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJjb25uZWN0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./middlewares/conectarMongoDB.ts\n");

/***/ }),

/***/ "(api-node)/./middlewares/corsMiddleware.ts":
/*!***************************************!*\
  !*** ./middlewares/corsMiddleware.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   corsMiddleware: () => (/* binding */ corsMiddleware)\n/* harmony export */ });\nfunction corsMiddleware(handler) {\n    return async (req, res)=>{\n        // Configurar cabeçalhos CORS\n        const origin = process.env.CORS_ORIGIN || 'http://localhost:3001';\n        res.setHeader('Access-Control-Allow-Origin', origin);\n        res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');\n        res.setHeader('Access-Control-Allow-Headers', 'Content-Type, Authorization, X-Requested-With');\n        res.setHeader('Access-Control-Allow-Credentials', 'true');\n        // Responder imediatamente para requisições OPTIONS (preflight)\n        if (req.method === 'OPTIONS') {\n            return res.status(200).end();\n        }\n        // Passar para o próximo handler\n        return handler(req, res);\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL21pZGRsZXdhcmVzL2NvcnNNaWRkbGV3YXJlLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFHTyxTQUFTQSxlQUFlQyxPQUF1QjtJQUNwRCxPQUFPLE9BQU9DLEtBQXFCQztRQUNqQyw2QkFBNkI7UUFDN0IsTUFBTUMsU0FBU0MsUUFBUUMsR0FBRyxDQUFDQyxXQUFXLElBQUk7UUFFMUNKLElBQUlLLFNBQVMsQ0FBQywrQkFBK0JKO1FBQzdDRCxJQUFJSyxTQUFTLENBQUMsZ0NBQWdDO1FBQzlDTCxJQUFJSyxTQUFTLENBQUMsZ0NBQWdDO1FBQzlDTCxJQUFJSyxTQUFTLENBQUMsb0NBQW9DO1FBRWxELCtEQUErRDtRQUMvRCxJQUFJTixJQUFJTyxNQUFNLEtBQUssV0FBVztZQUM1QixPQUFPTixJQUFJTyxNQUFNLENBQUMsS0FBS0MsR0FBRztRQUM1QjtRQUVBLGdDQUFnQztRQUNoQyxPQUFPVixRQUFRQyxLQUFLQztJQUN0QjtBQUNGIiwic291cmNlcyI6WyJDOlxcUHJvamV0b3MgR2l0XFxEZXZhcmlhXFxEZXZhZ3JhbS1Ob2RlXFxtaWRkbGV3YXJlc1xcY29yc01pZGRsZXdhcmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlLCBOZXh0QXBpSGFuZGxlciB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHR5cGUgeyByZXNwb3N0YVBhZHJhb01zZyB9IGZyb20gJy4uL3R5cGVzL3Jlc3Bvc3RhUGFkcmFvTXNnJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNvcnNNaWRkbGV3YXJlKGhhbmRsZXI6IE5leHRBcGlIYW5kbGVyKSB7XG4gIHJldHVybiBhc3luYyAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2U8cmVzcG9zdGFQYWRyYW9Nc2c+KSA9PiB7XG4gICAgLy8gQ29uZmlndXJhciBjYWJlw6dhbGhvcyBDT1JTXG4gICAgY29uc3Qgb3JpZ2luID0gcHJvY2Vzcy5lbnYuQ09SU19PUklHSU4gfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMSc7XG4gICAgXG4gICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgb3JpZ2luKTtcbiAgICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCwgUE9TVCwgUFVULCBERUxFVEUsIE9QVElPTlMnKTtcbiAgICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ0NvbnRlbnQtVHlwZSwgQXV0aG9yaXphdGlvbiwgWC1SZXF1ZXN0ZWQtV2l0aCcpO1xuICAgIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgJ3RydWUnKTtcbiAgICBcbiAgICAvLyBSZXNwb25kZXIgaW1lZGlhdGFtZW50ZSBwYXJhIHJlcXVpc2nDp8O1ZXMgT1BUSU9OUyAocHJlZmxpZ2h0KVxuICAgIGlmIChyZXEubWV0aG9kID09PSAnT1BUSU9OUycpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuZW5kKCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFBhc3NhciBwYXJhIG8gcHLDs3hpbW8gaGFuZGxlclxuICAgIHJldHVybiBoYW5kbGVyKHJlcSwgcmVzKTtcbiAgfTtcbn0iXSwibmFtZXMiOlsiY29yc01pZGRsZXdhcmUiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwib3JpZ2luIiwicHJvY2VzcyIsImVudiIsIkNPUlNfT1JJR0lOIiwic2V0SGVhZGVyIiwibWV0aG9kIiwic3RhdHVzIiwiZW5kIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./middlewares/corsMiddleware.ts\n");

/***/ }),

/***/ "(api-node)/./middlewares/validarTokenJWT.ts":
/*!****************************************!*\
  !*** ./middlewares/validarTokenJWT.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   validarTokenJWT: () => (/* binding */ validarTokenJWT)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n\nconst validarTokenJWT = (handler)=>(req, res)=>{\n        try {\n            const { JWT_SECRET } = process.env;\n            if (!JWT_SECRET) {\n                return res.status(500).json({\n                    erro: 'Chave JWT não configurada no servidor'\n                });\n            }\n            // Permitir requisições OPTIONS para CORS\n            if (req.method === 'OPTIONS') {\n                return handler(req, res);\n            }\n            if (!req || !req.headers) {\n                return res.status(401).json({\n                    erro: 'Não foi possível validar o token de acesso'\n                });\n            }\n            const authorization = req.headers['authorization'];\n            if (!authorization) {\n                return res.status(401).json({\n                    erro: 'Token de autorização não fornecido'\n                });\n            }\n            const token = authorization.substring(7); // Remove 'Bearer ' do início\n            if (!token) {\n                return res.status(401).json({\n                    erro: 'Token de autorização inválido'\n                });\n            }\n            try {\n                // Verifica o token com a chave JWT\n                const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, JWT_SECRET);\n                if (!req.query) {\n                    req.query = {};\n                }\n                // Extrai o ID do usuário do token e adiciona ao objeto de consulta\n                if (decoded && typeof decoded === 'object') {\n                    if (decoded._id) {\n                        req.query.userId = decoded._id;\n                    } else if (decoded.usuario_id) {\n                        req.query.userId = decoded.usuario_id;\n                    }\n                }\n                // Log para debug\n                console.log('Token validado com sucesso. ID do usuário:', req.query.userId);\n                return handler(req, res);\n            } catch (err) {\n                console.log('Erro ao verificar token JWT:', err);\n                return res.status(401).json({\n                    erro: 'Token inválido ou expirado'\n                });\n            }\n        } catch (e) {\n            console.log('Erro ao validar token JWT:', e);\n            return res.status(500).json({\n                erro: 'Ocorreu erro ao validar o token de acesso'\n            });\n        }\n    };\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL21pZGRsZXdhcmVzL3ZhbGlkYXJUb2tlbkpXVC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFFK0M7QUFFeEMsTUFBTUMsa0JBQWtCLENBQUNDLFVBQzVCLENBQUNDLEtBQXFCQztRQUNsQixJQUFJO1lBQ0EsTUFBTSxFQUFFQyxVQUFVLEVBQUUsR0FBR0MsUUFBUUMsR0FBRztZQUVsQyxJQUFJLENBQUNGLFlBQVk7Z0JBQ2IsT0FBT0QsSUFBSUksTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRUMsTUFBTTtnQkFBd0M7WUFDaEY7WUFFQSx5Q0FBeUM7WUFDekMsSUFBSVAsSUFBSVEsTUFBTSxLQUFLLFdBQVc7Z0JBQzFCLE9BQU9ULFFBQVFDLEtBQUtDO1lBQ3hCO1lBRUEsSUFBSSxDQUFDRCxPQUFPLENBQUNBLElBQUlTLE9BQU8sRUFBRTtnQkFDdEIsT0FBT1IsSUFBSUksTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRUMsTUFBTTtnQkFBNkM7WUFDckY7WUFFQSxNQUFNRyxnQkFBZ0JWLElBQUlTLE9BQU8sQ0FBQyxnQkFBZ0I7WUFDbEQsSUFBSSxDQUFDQyxlQUFlO2dCQUNoQixPQUFPVCxJQUFJSSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO29CQUFFQyxNQUFNO2dCQUFxQztZQUM3RTtZQUVBLE1BQU1JLFFBQVFELGNBQWNFLFNBQVMsQ0FBQyxJQUFJLDZCQUE2QjtZQUN2RSxJQUFJLENBQUNELE9BQU87Z0JBQ1IsT0FBT1YsSUFBSUksTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRUMsTUFBTTtnQkFBZ0M7WUFDeEU7WUFFQSxJQUFJO2dCQUNBLG1DQUFtQztnQkFDbkMsTUFBTU0sVUFBVWhCLDBEQUFVLENBQUNjLE9BQU9UO2dCQUVsQyxJQUFJLENBQUNGLElBQUllLEtBQUssRUFBRTtvQkFDWmYsSUFBSWUsS0FBSyxHQUFHLENBQUM7Z0JBQ2pCO2dCQUVBLG1FQUFtRTtnQkFDbkUsSUFBSUYsV0FBVyxPQUFPQSxZQUFZLFVBQVU7b0JBQ3hDLElBQUlBLFFBQVFHLEdBQUcsRUFBRTt3QkFDYmhCLElBQUllLEtBQUssQ0FBQ0UsTUFBTSxHQUFHSixRQUFRRyxHQUFHO29CQUNsQyxPQUFPLElBQUlILFFBQVFLLFVBQVUsRUFBRTt3QkFDM0JsQixJQUFJZSxLQUFLLENBQUNFLE1BQU0sR0FBR0osUUFBUUssVUFBVTtvQkFDekM7Z0JBQ0o7Z0JBRUEsaUJBQWlCO2dCQUNqQkMsUUFBUUMsR0FBRyxDQUFDLDhDQUE4Q3BCLElBQUllLEtBQUssQ0FBQ0UsTUFBTTtnQkFFMUUsT0FBT2xCLFFBQVFDLEtBQUtDO1lBQ3hCLEVBQUUsT0FBT29CLEtBQUs7Z0JBQ1ZGLFFBQVFDLEdBQUcsQ0FBQyxnQ0FBZ0NDO2dCQUM1QyxPQUFPcEIsSUFBSUksTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRUMsTUFBTTtnQkFBNkI7WUFDckU7UUFDSixFQUFFLE9BQU9lLEdBQUc7WUFDUkgsUUFBUUMsR0FBRyxDQUFDLDhCQUE4QkU7WUFDMUMsT0FBT3JCLElBQUlJLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE1BQU07WUFBNEM7UUFDcEY7SUFDSixFQUFDIiwic291cmNlcyI6WyJDOlxcUHJvamV0b3MgR2l0XFxEZXZhcmlhXFxEZXZhZ3JhbS1Ob2RlXFxtaWRkbGV3YXJlc1xcdmFsaWRhclRva2VuSldULnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSwgTmV4dEFwaUhhbmRsZXIgfSBmcm9tICduZXh0JztcclxuaW1wb3J0IHR5cGUgeyByZXNwb3N0YVBhZHJhb01zZyB9IGZyb20gJy4uL3R5cGVzL3Jlc3Bvc3RhUGFkcmFvTXNnJ1xyXG5pbXBvcnQgand0LCB7IEp3dFBheWxvYWQgfSBmcm9tICdqc29ud2VidG9rZW4nO1xyXG5cclxuZXhwb3J0IGNvbnN0IHZhbGlkYXJUb2tlbkpXVCA9IChoYW5kbGVyOiBOZXh0QXBpSGFuZGxlcikgPT5cclxuICAgIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZTxyZXNwb3N0YVBhZHJhb01zZz4pID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB7IEpXVF9TRUNSRVQgfSA9IHByb2Nlc3MuZW52O1xyXG5cclxuICAgICAgICAgICAgaWYgKCFKV1RfU0VDUkVUKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvOiAnQ2hhdmUgSldUIG7Do28gY29uZmlndXJhZGEgbm8gc2Vydmlkb3InIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBQZXJtaXRpciByZXF1aXNpw6fDtWVzIE9QVElPTlMgcGFyYSBDT1JTXHJcbiAgICAgICAgICAgIGlmIChyZXEubWV0aG9kID09PSAnT1BUSU9OUycpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVyKHJlcSwgcmVzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFyZXEgfHwgIXJlcS5oZWFkZXJzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvOiAnTsOjbyBmb2kgcG9zc8OtdmVsIHZhbGlkYXIgbyB0b2tlbiBkZSBhY2Vzc28nIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBhdXRob3JpemF0aW9uID0gcmVxLmhlYWRlcnNbJ2F1dGhvcml6YXRpb24nXTtcclxuICAgICAgICAgICAgaWYgKCFhdXRob3JpemF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvOiAnVG9rZW4gZGUgYXV0b3JpemHDp8OjbyBuw6NvIGZvcm5lY2lkbycgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRva2VuID0gYXV0aG9yaXphdGlvbi5zdWJzdHJpbmcoNyk7IC8vIFJlbW92ZSAnQmVhcmVyICcgZG8gaW7DrWNpb1xyXG4gICAgICAgICAgICBpZiAoIXRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvOiAnVG9rZW4gZGUgYXV0b3JpemHDp8OjbyBpbnbDoWxpZG8nIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgLy8gVmVyaWZpY2EgbyB0b2tlbiBjb20gYSBjaGF2ZSBKV1RcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBKV1RfU0VDUkVUKSBhcyBKd3RQYXlsb2FkO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIXJlcS5xdWVyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcS5xdWVyeSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBFeHRyYWkgbyBJRCBkbyB1c3XDoXJpbyBkbyB0b2tlbiBlIGFkaWNpb25hIGFvIG9iamV0byBkZSBjb25zdWx0YVxyXG4gICAgICAgICAgICAgICAgaWYgKGRlY29kZWQgJiYgdHlwZW9mIGRlY29kZWQgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlY29kZWQuX2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5xdWVyeS51c2VySWQgPSBkZWNvZGVkLl9pZDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRlY29kZWQudXN1YXJpb19pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXEucXVlcnkudXNlcklkID0gZGVjb2RlZC51c3VhcmlvX2lkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBMb2cgcGFyYSBkZWJ1Z1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1Rva2VuIHZhbGlkYWRvIGNvbSBzdWNlc3NvLiBJRCBkbyB1c3XDoXJpbzonLCByZXEucXVlcnkudXNlcklkKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXIocmVxLCByZXMpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvIGFvIHZlcmlmaWNhciB0b2tlbiBKV1Q6JywgZXJyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm86ICdUb2tlbiBpbnbDoWxpZG8gb3UgZXhwaXJhZG8nIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRXJybyBhbyB2YWxpZGFyIHRva2VuIEpXVDonLCBlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJybzogJ09jb3JyZXUgZXJybyBhbyB2YWxpZGFyIG8gdG9rZW4gZGUgYWNlc3NvJyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9Il0sIm5hbWVzIjpbImp3dCIsInZhbGlkYXJUb2tlbkpXVCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJKV1RfU0VDUkVUIiwicHJvY2VzcyIsImVudiIsInN0YXR1cyIsImpzb24iLCJlcnJvIiwibWV0aG9kIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJ0b2tlbiIsInN1YnN0cmluZyIsImRlY29kZWQiLCJ2ZXJpZnkiLCJxdWVyeSIsIl9pZCIsInVzZXJJZCIsInVzdWFyaW9faWQiLCJjb25zb2xlIiwibG9nIiwiZXJyIiwiZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./middlewares/validarTokenJWT.ts\n");

/***/ }),

/***/ "(api-node)/./models/PublicacaoModel.ts":
/*!***********************************!*\
  !*** ./models/PublicacaoModel.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PublicacaoModel: () => (/* binding */ PublicacaoModel)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst PublicacaoSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    idUsuario: {\n        type: String,\n        required: true\n    },\n    descricao: {\n        type: String,\n        required: true\n    },\n    foto: {\n        type: String,\n        required: true\n    },\n    data: {\n        type: Date,\n        required: true\n    },\n    comentarios: {\n        type: Array,\n        required: true,\n        default: []\n    },\n    likes: {\n        type: Array,\n        required: true,\n        default: []\n    }\n});\nconst PublicacaoModel = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).publicacoes || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('publicacoes', PublicacaoSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL21vZGVscy9QdWJsaWNhY2FvTW9kZWwudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTRDO0FBRTVDLE1BQU1FLG1CQUFtQixJQUFJRCw0Q0FBTUEsQ0FBQztJQUNoQ0UsV0FBVztRQUFFQyxNQUFNQztRQUFRQyxVQUFVO0lBQUs7SUFDMUNDLFdBQVc7UUFBRUgsTUFBTUM7UUFBUUMsVUFBVTtJQUFLO0lBQzFDRSxNQUFNO1FBQUVKLE1BQU1DO1FBQVFDLFVBQVU7SUFBSztJQUNyQ0csTUFBTTtRQUFFTCxNQUFNTTtRQUFNSixVQUFVO0lBQUs7SUFDbkNLLGFBQWE7UUFBRVAsTUFBTVE7UUFBT04sVUFBVTtRQUFNTyxTQUFTLEVBQUU7SUFBQztJQUN4REMsT0FBTztRQUFFVixNQUFNUTtRQUFPTixVQUFVO1FBQU1PLFNBQVMsRUFBRTtJQUFDO0FBQ3REO0FBRU8sTUFBTUUsa0JBQW1CZix3REFBZSxDQUFDaUIsV0FBVyxJQUFJakIscURBQWMsQ0FBQyxlQUFlRSxrQkFBbUIiLCJzb3VyY2VzIjpbIkM6XFxQcm9qZXRvcyBHaXRcXERldmFyaWFcXERldmFncmFtLU5vZGVcXG1vZGVsc1xcUHVibGljYWNhb01vZGVsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSwgeyBTY2hlbWEgfSBmcm9tIFwibW9uZ29vc2VcIjtcclxuXHJcbmNvbnN0IFB1YmxpY2FjYW9TY2hlbWEgPSBuZXcgU2NoZW1hKHtcclxuICAgIGlkVXN1YXJpbzogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgICBkZXNjcmljYW86IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gICAgZm90bzogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgICBkYXRhOiB7IHR5cGU6IERhdGUsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgICBjb21lbnRhcmlvczogeyB0eXBlOiBBcnJheSwgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHQ6IFtdIH0sXHJcbiAgICBsaWtlczogeyB0eXBlOiBBcnJheSwgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHQ6IFtdIH0sXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IFB1YmxpY2FjYW9Nb2RlbCA9IChtb25nb29zZS5tb2RlbHMucHVibGljYWNvZXMgfHwgbW9uZ29vc2UubW9kZWwoJ3B1YmxpY2Fjb2VzJywgUHVibGljYWNhb1NjaGVtYSkpOyJdLCJuYW1lcyI6WyJtb25nb29zZSIsIlNjaGVtYSIsIlB1YmxpY2FjYW9TY2hlbWEiLCJpZFVzdWFyaW8iLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJkZXNjcmljYW8iLCJmb3RvIiwiZGF0YSIsIkRhdGUiLCJjb21lbnRhcmlvcyIsIkFycmF5IiwiZGVmYXVsdCIsImxpa2VzIiwiUHVibGljYWNhb01vZGVsIiwibW9kZWxzIiwicHVibGljYWNvZXMiLCJtb2RlbCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./models/PublicacaoModel.ts\n");

/***/ }),

/***/ "(api-node)/./models/UsuarioModel.ts":
/*!********************************!*\
  !*** ./models/UsuarioModel.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UsuarioModel: () => (/* binding */ UsuarioModel)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst UsuarioSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    nome: {\n        type: String,\n        require: true\n    },\n    email: {\n        type: String,\n        require: true\n    },\n    senha: {\n        type: String,\n        require: true\n    },\n    avatar: {\n        type: String,\n        require: false\n    },\n    seguidores: {\n        type: Number,\n        default: 0\n    },\n    seguindo: {\n        type: Number,\n        default: 0\n    },\n    publicacoes: {\n        type: Number,\n        default: 0\n    }\n});\nconst UsuarioModel = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).usuarios || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('usuarios', UsuarioSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL21vZGVscy9Vc3VhcmlvTW9kZWwudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTRDO0FBRTVDLE1BQU1FLGdCQUFnQixJQUFJRCw0Q0FBTUEsQ0FBQztJQUM3QkUsTUFBTTtRQUFFQyxNQUFNQztRQUFRQyxTQUFTO0lBQUs7SUFDcENDLE9BQU87UUFBRUgsTUFBTUM7UUFBUUMsU0FBUztJQUFLO0lBQ3JDRSxPQUFPO1FBQUVKLE1BQU1DO1FBQVFDLFNBQVM7SUFBSztJQUNyQ0csUUFBUTtRQUFFTCxNQUFNQztRQUFRQyxTQUFTO0lBQU07SUFDdkNJLFlBQVk7UUFBRU4sTUFBTU87UUFBUUMsU0FBUztJQUFFO0lBQ3ZDQyxVQUFVO1FBQUVULE1BQU1PO1FBQVFDLFNBQVM7SUFBRTtJQUNyQ0UsYUFBYTtRQUFFVixNQUFNTztRQUFRQyxTQUFTO0lBQUU7QUFDNUM7QUFFTyxNQUFNRyxlQUFnQmYsd0RBQWUsQ0FBQ2lCLFFBQVEsSUFDakRqQixxREFBYyxDQUFDLFlBQVlFLGVBQWUiLCJzb3VyY2VzIjpbIkM6XFxQcm9qZXRvcyBHaXRcXERldmFyaWFcXERldmFncmFtLU5vZGVcXG1vZGVsc1xcVXN1YXJpb01vZGVsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSwgeyBTY2hlbWEgfSBmcm9tICdtb25nb29zZSc7XHJcblxyXG5jb25zdCBVc3VhcmlvU2NoZW1hID0gbmV3IFNjaGVtYSh7XHJcbiAgICBub21lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZTogdHJ1ZSB9LFxyXG4gICAgZW1haWw6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlOiB0cnVlIH0sXHJcbiAgICBzZW5oYTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmU6IHRydWUgfSxcclxuICAgIGF2YXRhcjogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmU6IGZhbHNlIH0sXHJcbiAgICBzZWd1aWRvcmVzOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxyXG4gICAgc2VndWluZG86IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXHJcbiAgICBwdWJsaWNhY29lczogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgVXN1YXJpb01vZGVsID0gKG1vbmdvb3NlLm1vZGVscy51c3VhcmlvcyB8fFxyXG4gICAgbW9uZ29vc2UubW9kZWwoJ3VzdWFyaW9zJywgVXN1YXJpb1NjaGVtYSkpXHJcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsIlNjaGVtYSIsIlVzdWFyaW9TY2hlbWEiLCJub21lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmUiLCJlbWFpbCIsInNlbmhhIiwiYXZhdGFyIiwic2VndWlkb3JlcyIsIk51bWJlciIsImRlZmF1bHQiLCJzZWd1aW5kbyIsInB1YmxpY2Fjb2VzIiwiVXN1YXJpb01vZGVsIiwibW9kZWxzIiwidXN1YXJpb3MiLCJtb2RlbCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./models/UsuarioModel.ts\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FexcluirPublicacao&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5CexcluirPublicacao.ts&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FexcluirPublicacao&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5CexcluirPublicacao.ts&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_excluirPublicacao_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\excluirPublicacao.ts */ \"(api-node)/./pages/api/excluirPublicacao.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_excluirPublicacao_ts__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_excluirPublicacao_ts__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/excluirPublicacao\",\n        pathname: \"/api/excluirPublicacao\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_excluirPublicacao_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGZXhjbHVpclB1YmxpY2FjYW8mcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q2V4Y2x1aXJQdWJsaWNhY2FvLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNFO0FBQzFEO0FBQytEO0FBQy9EO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyw0REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsNERBQVE7QUFDcEM7QUFDTyx3QkFBd0IseUdBQW1CO0FBQ2xEO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcZXhjbHVpclB1YmxpY2FjYW8udHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2V4Y2x1aXJQdWJsaWNhY2FvXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZXhjbHVpclB1YmxpY2FjYW9cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FexcluirPublicacao&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5CexcluirPublicacao.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/excluirPublicacao.ts":
/*!****************************************!*\
  !*** ./pages/api/excluirPublicacao.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _middlewares_conectarMongoDB__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../middlewares/conectarMongoDB */ \"(api-node)/./middlewares/conectarMongoDB.ts\");\n/* harmony import */ var _middlewares_validarTokenJWT__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../middlewares/validarTokenJWT */ \"(api-node)/./middlewares/validarTokenJWT.ts\");\n/* harmony import */ var _models_PublicacaoModel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../models/PublicacaoModel */ \"(api-node)/./models/PublicacaoModel.ts\");\n/* harmony import */ var _models_UsuarioModel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../models/UsuarioModel */ \"(api-node)/./models/UsuarioModel.ts\");\n/* harmony import */ var _middlewares_corsMiddleware__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/middlewares/corsMiddleware */ \"(api-node)/./middlewares/corsMiddleware.ts\");\n/* harmony import */ var _services_excluirImagemS3__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../services/excluirImagemS3 */ \"(api-node)/./services/excluirImagemS3.ts\");\n\n\n\n\n\n\nconst handler = async (req, res)=>{\n    try {\n        // Verificar se o método é DELETE\n        if (req.method !== 'DELETE') {\n            return res.status(405).json({\n                erro: 'Método não permitido'\n            });\n        }\n        const { userId } = req.query;\n        const { id } = req.query;\n        console.log('Excluindo publicação:', {\n            userId,\n            publicacaoId: id\n        });\n        // Validar se o ID da publicação foi fornecido\n        if (!id) {\n            return res.status(400).json({\n                erro: 'ID da publicação não informado'\n            });\n        }\n        // Buscar a publicação pelo ID\n        const publicacao = await _models_PublicacaoModel__WEBPACK_IMPORTED_MODULE_2__.PublicacaoModel.findById(id);\n        if (!publicacao) {\n            return res.status(404).json({\n                erro: 'Publicação não encontrada'\n            });\n        }\n        console.log('Publicação encontrada:', publicacao);\n        // Verificar se o usuário logado é o dono da publicação\n        if (publicacao.idUsuario.toString() !== userId) {\n            return res.status(403).json({\n                erro: 'Usuário não tem permissão para excluir esta publicação'\n            });\n        }\n        // Buscar o usuário para atualizar o contador de publicações\n        const usuario = await _models_UsuarioModel__WEBPACK_IMPORTED_MODULE_3__.UsuarioModel.findById(userId);\n        if (usuario && usuario.publicacoes > 0) {\n            usuario.publicacoes--;\n            await _models_UsuarioModel__WEBPACK_IMPORTED_MODULE_3__.UsuarioModel.findByIdAndUpdate({\n                _id: usuario._id\n            }, usuario);\n        }\n        // Excluir a imagem do S3\n        if (publicacao.foto) {\n            try {\n                const imagemExcluida = await (0,_services_excluirImagemS3__WEBPACK_IMPORTED_MODULE_5__.excluirImagemS3)(publicacao.foto);\n                console.log('Resultado da exclusão da imagem:', imagemExcluida ? 'Sucesso' : 'Falha');\n            } catch (erroS3) {\n                console.error('Erro ao excluir imagem do S3:', erroS3);\n            // Continuamos com a exclusão da publicação mesmo se houver erro na exclusão da imagem\n            }\n        }\n        // Excluir a publicação\n        await _models_PublicacaoModel__WEBPACK_IMPORTED_MODULE_2__.PublicacaoModel.findByIdAndDelete(id);\n        return res.status(200).json({\n            msg: 'Publicação excluída com sucesso'\n        });\n    } catch (e) {\n        console.log('Erro ao excluir publicação:', e);\n        return res.status(400).json({\n            erro: 'Erro ao excluir publicação'\n        });\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_middlewares_corsMiddleware__WEBPACK_IMPORTED_MODULE_4__.corsMiddleware)((0,_middlewares_validarTokenJWT__WEBPACK_IMPORTED_MODULE_1__.validarTokenJWT)((0,_middlewares_conectarMongoDB__WEBPACK_IMPORTED_MODULE_0__.conectarMongoDB)(handler))));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9leGNsdWlyUHVibGljYWNhby50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBRW9FO0FBQ0E7QUFDTDtBQUNOO0FBQ0s7QUFDRztBQUVqRSxNQUFNTSxVQUFVLE9BQU9DLEtBQXFCQztJQUN4QyxJQUFJO1FBQ0EsaUNBQWlDO1FBQ2pDLElBQUlELElBQUlFLE1BQU0sS0FBSyxVQUFVO1lBQ3pCLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE1BQU07WUFBdUI7UUFDL0Q7UUFFQSxNQUFNLEVBQUVDLE1BQU0sRUFBRSxHQUFHTixJQUFJTyxLQUFLO1FBQzVCLE1BQU0sRUFBRUMsRUFBRSxFQUFFLEdBQUdSLElBQUlPLEtBQUs7UUFFeEJFLFFBQVFDLEdBQUcsQ0FBQyx5QkFBeUI7WUFBRUo7WUFBUUssY0FBY0g7UUFBRztRQUVoRSw4Q0FBOEM7UUFDOUMsSUFBSSxDQUFDQSxJQUFJO1lBQ0wsT0FBT1AsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsTUFBTTtZQUFpQztRQUN6RTtRQUVBLDhCQUE4QjtRQUM5QixNQUFNTyxhQUFhLE1BQU1qQixvRUFBZUEsQ0FBQ2tCLFFBQVEsQ0FBQ0w7UUFDbEQsSUFBSSxDQUFDSSxZQUFZO1lBQ2IsT0FBT1gsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsTUFBTTtZQUE0QjtRQUNwRTtRQUVBSSxRQUFRQyxHQUFHLENBQUMsMEJBQTBCRTtRQUV0Qyx1REFBdUQ7UUFDdkQsSUFBSUEsV0FBV0UsU0FBUyxDQUFDQyxRQUFRLE9BQU9ULFFBQVE7WUFDNUMsT0FBT0wsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsTUFBTTtZQUF5RDtRQUNqRztRQUVBLDREQUE0RDtRQUM1RCxNQUFNVyxVQUFVLE1BQU1wQiw4REFBWUEsQ0FBQ2lCLFFBQVEsQ0FBQ1A7UUFDNUMsSUFBSVUsV0FBV0EsUUFBUUMsV0FBVyxHQUFHLEdBQUc7WUFDcENELFFBQVFDLFdBQVc7WUFDbkIsTUFBTXJCLDhEQUFZQSxDQUFDc0IsaUJBQWlCLENBQUM7Z0JBQUVDLEtBQUtILFFBQVFHLEdBQUc7WUFBQyxHQUFHSDtRQUMvRDtRQUVBLHlCQUF5QjtRQUN6QixJQUFJSixXQUFXUSxJQUFJLEVBQUU7WUFDakIsSUFBSTtnQkFDQSxNQUFNQyxpQkFBaUIsTUFBTXZCLDBFQUFlQSxDQUFDYyxXQUFXUSxJQUFJO2dCQUM1RFgsUUFBUUMsR0FBRyxDQUFDLG9DQUFvQ1csaUJBQWlCLFlBQVk7WUFDakYsRUFBRSxPQUFPQyxRQUFRO2dCQUNiYixRQUFRYyxLQUFLLENBQUMsaUNBQWlDRDtZQUMvQyxzRkFBc0Y7WUFDMUY7UUFDSjtRQUVBLHVCQUF1QjtRQUN2QixNQUFNM0Isb0VBQWVBLENBQUM2QixpQkFBaUIsQ0FBQ2hCO1FBRXhDLE9BQU9QLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRXFCLEtBQUs7UUFBa0M7SUFDekUsRUFBRSxPQUFPQyxHQUFHO1FBQ1JqQixRQUFRQyxHQUFHLENBQUMsK0JBQStCZ0I7UUFDM0MsT0FBT3pCLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsTUFBTTtRQUE2QjtJQUNyRTtBQUNKO0FBRUEsaUVBQWVSLDJFQUFjQSxDQUFDSCw2RUFBZUEsQ0FBQ0QsNkVBQWVBLENBQUNNLFVBQVVBLEVBQUMiLCJzb3VyY2VzIjpbIkM6XFxQcm9qZXRvcyBHaXRcXERldmFyaWFcXERldmFncmFtLU5vZGVcXHBhZ2VzXFxhcGlcXGV4Y2x1aXJQdWJsaWNhY2FvLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHR5cGUgeyByZXNwb3N0YVBhZHJhb01zZyB9IGZyb20gJy4uLy4uL3R5cGVzL3Jlc3Bvc3RhUGFkcmFvTXNnJztcbmltcG9ydCB7IGNvbmVjdGFyTW9uZ29EQiB9IGZyb20gJy4uLy4uL21pZGRsZXdhcmVzL2NvbmVjdGFyTW9uZ29EQic7XG5pbXBvcnQgeyB2YWxpZGFyVG9rZW5KV1QgfSBmcm9tICcuLi8uLi9taWRkbGV3YXJlcy92YWxpZGFyVG9rZW5KV1QnO1xuaW1wb3J0IHsgUHVibGljYWNhb01vZGVsIH0gZnJvbSAnLi4vLi4vbW9kZWxzL1B1YmxpY2FjYW9Nb2RlbCc7XG5pbXBvcnQgeyBVc3VhcmlvTW9kZWwgfSBmcm9tICcuLi8uLi9tb2RlbHMvVXN1YXJpb01vZGVsJztcbmltcG9ydCB7IGNvcnNNaWRkbGV3YXJlIH0gZnJvbSAnQC9taWRkbGV3YXJlcy9jb3JzTWlkZGxld2FyZSc7XG5pbXBvcnQgeyBleGNsdWlySW1hZ2VtUzMgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9leGNsdWlySW1hZ2VtUzMnO1xuXG5jb25zdCBoYW5kbGVyID0gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlPHJlc3Bvc3RhUGFkcmFvTXNnPikgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIFZlcmlmaWNhciBzZSBvIG3DqXRvZG8gw6kgREVMRVRFXG4gICAgICAgIGlmIChyZXEubWV0aG9kICE9PSAnREVMRVRFJykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJybzogJ03DqXRvZG8gbsOjbyBwZXJtaXRpZG8nIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyB1c2VySWQgfSA9IHJlcS5xdWVyeTtcbiAgICAgICAgY29uc3QgeyBpZCB9ID0gcmVxLnF1ZXJ5O1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdFeGNsdWluZG8gcHVibGljYcOnw6NvOicsIHsgdXNlcklkLCBwdWJsaWNhY2FvSWQ6IGlkIH0pO1xuXG4gICAgICAgIC8vIFZhbGlkYXIgc2UgbyBJRCBkYSBwdWJsaWNhw6fDo28gZm9pIGZvcm5lY2lkb1xuICAgICAgICBpZiAoIWlkKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvOiAnSUQgZGEgcHVibGljYcOnw6NvIG7Do28gaW5mb3JtYWRvJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJ1c2NhciBhIHB1YmxpY2HDp8OjbyBwZWxvIElEXG4gICAgICAgIGNvbnN0IHB1YmxpY2FjYW8gPSBhd2FpdCBQdWJsaWNhY2FvTW9kZWwuZmluZEJ5SWQoaWQpO1xuICAgICAgICBpZiAoIXB1YmxpY2FjYW8pIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm86ICdQdWJsaWNhw6fDo28gbsOjbyBlbmNvbnRyYWRhJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdQdWJsaWNhw6fDo28gZW5jb250cmFkYTonLCBwdWJsaWNhY2FvKTtcblxuICAgICAgICAvLyBWZXJpZmljYXIgc2UgbyB1c3XDoXJpbyBsb2dhZG8gw6kgbyBkb25vIGRhIHB1YmxpY2HDp8Ojb1xuICAgICAgICBpZiAocHVibGljYWNhby5pZFVzdWFyaW8udG9TdHJpbmcoKSAhPT0gdXNlcklkKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvOiAnVXN1w6FyaW8gbsOjbyB0ZW0gcGVybWlzc8OjbyBwYXJhIGV4Y2x1aXIgZXN0YSBwdWJsaWNhw6fDo28nIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQnVzY2FyIG8gdXN1w6FyaW8gcGFyYSBhdHVhbGl6YXIgbyBjb250YWRvciBkZSBwdWJsaWNhw6fDtWVzXG4gICAgICAgIGNvbnN0IHVzdWFyaW8gPSBhd2FpdCBVc3VhcmlvTW9kZWwuZmluZEJ5SWQodXNlcklkKTtcbiAgICAgICAgaWYgKHVzdWFyaW8gJiYgdXN1YXJpby5wdWJsaWNhY29lcyA+IDApIHtcbiAgICAgICAgICAgIHVzdWFyaW8ucHVibGljYWNvZXMtLTtcbiAgICAgICAgICAgIGF3YWl0IFVzdWFyaW9Nb2RlbC5maW5kQnlJZEFuZFVwZGF0ZSh7IF9pZDogdXN1YXJpby5faWQgfSwgdXN1YXJpbyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFeGNsdWlyIGEgaW1hZ2VtIGRvIFMzXG4gICAgICAgIGlmIChwdWJsaWNhY2FvLmZvdG8pIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW1hZ2VtRXhjbHVpZGEgPSBhd2FpdCBleGNsdWlySW1hZ2VtUzMocHVibGljYWNhby5mb3RvKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUmVzdWx0YWRvIGRhIGV4Y2x1c8OjbyBkYSBpbWFnZW06JywgaW1hZ2VtRXhjbHVpZGEgPyAnU3VjZXNzbycgOiAnRmFsaGEnKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9TMykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gYW8gZXhjbHVpciBpbWFnZW0gZG8gUzM6JywgZXJyb1MzKTtcbiAgICAgICAgICAgICAgICAvLyBDb250aW51YW1vcyBjb20gYSBleGNsdXPDo28gZGEgcHVibGljYcOnw6NvIG1lc21vIHNlIGhvdXZlciBlcnJvIG5hIGV4Y2x1c8OjbyBkYSBpbWFnZW1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV4Y2x1aXIgYSBwdWJsaWNhw6fDo29cbiAgICAgICAgYXdhaXQgUHVibGljYWNhb01vZGVsLmZpbmRCeUlkQW5kRGVsZXRlKGlkKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1zZzogJ1B1YmxpY2HDp8OjbyBleGNsdcOtZGEgY29tIHN1Y2Vzc28nIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Vycm8gYW8gZXhjbHVpciBwdWJsaWNhw6fDo286JywgZSk7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm86ICdFcnJvIGFvIGV4Y2x1aXIgcHVibGljYcOnw6NvJyB9KTtcbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjb3JzTWlkZGxld2FyZSh2YWxpZGFyVG9rZW5KV1QoY29uZWN0YXJNb25nb0RCKGhhbmRsZXIpKSk7Il0sIm5hbWVzIjpbImNvbmVjdGFyTW9uZ29EQiIsInZhbGlkYXJUb2tlbkpXVCIsIlB1YmxpY2FjYW9Nb2RlbCIsIlVzdWFyaW9Nb2RlbCIsImNvcnNNaWRkbGV3YXJlIiwiZXhjbHVpckltYWdlbVMzIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJlcnJvIiwidXNlcklkIiwicXVlcnkiLCJpZCIsImNvbnNvbGUiLCJsb2ciLCJwdWJsaWNhY2FvSWQiLCJwdWJsaWNhY2FvIiwiZmluZEJ5SWQiLCJpZFVzdWFyaW8iLCJ0b1N0cmluZyIsInVzdWFyaW8iLCJwdWJsaWNhY29lcyIsImZpbmRCeUlkQW5kVXBkYXRlIiwiX2lkIiwiZm90byIsImltYWdlbUV4Y2x1aWRhIiwiZXJyb1MzIiwiZXJyb3IiLCJmaW5kQnlJZEFuZERlbGV0ZSIsIm1zZyIsImUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/excluirPublicacao.ts\n");

/***/ }),

/***/ "(api-node)/./services/excluirImagemS3.ts":
/*!*************************************!*\
  !*** ./services/excluirImagemS3.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   excluirImagemS3: () => (/* binding */ excluirImagemS3)\n/* harmony export */ });\n/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/client-s3 */ \"@aws-sdk/client-s3\");\n/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__);\n\n// Configuração do cliente S3\nconst region = process.env.AWS_REGION || 'us-east-1';\nconst accessKeyId = process.env.AWS_ACCESS_KEY_ID || '';\nconst secretAccessKey = process.env.AWS_SECRET_ACCESS_KEY || '';\nconst s3Client = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.S3Client({\n    region,\n    credentials: {\n        accessKeyId,\n        secretAccessKey\n    }\n});\n/**\n * Extrai o nome do arquivo (key) de uma URL do S3 ou CloudFront\n * @param url URL da imagem\n * @returns Nome do arquivo (key) para o S3\n */ const extrairKeyDaUrl = (url)=>{\n    try {\n        // Remover parâmetros de query (como timestamp)\n        const urlSemParametros = url.split('?')[0];\n        // Verificar se é uma URL do CloudFront\n        const cloudFrontDomain = process.env.CLOUDFRONT_DOMAIN;\n        if (cloudFrontDomain && url.includes(cloudFrontDomain)) {\n            // Formato: https://cloudfront.domain/pasta/arquivo.jpg\n            const partes = urlSemParametros.split(`${cloudFrontDomain}/`);\n            return partes.length > 1 ? partes[1] : null;\n        }\n        // Verificar se é uma URL do S3\n        if (url.includes('.s3.amazonaws.com/')) {\n            // Formato: https://bucket.s3.amazonaws.com/pasta/arquivo.jpg\n            const partes = urlSemParametros.split('.s3.amazonaws.com/');\n            return partes.length > 1 ? partes[1] : null;\n        }\n        return null;\n    } catch (error) {\n        console.error('Erro ao extrair key da URL:', error);\n        return null;\n    }\n};\n/**\n * Exclui uma imagem do S3\n * @param url URL da imagem a ser excluída\n * @returns true se a exclusão foi bem-sucedida, false caso contrário\n */ const excluirImagemS3 = async (url)=>{\n    try {\n        if (!url) {\n            console.error('URL da imagem não fornecida');\n            return false;\n        }\n        // Extrair o nome do arquivo (key) da URL\n        const key = extrairKeyDaUrl(url);\n        if (!key) {\n            console.error('Não foi possível extrair a key da URL:', url);\n            return false;\n        }\n        // Determinar o bucket com base no prefixo da key\n        const isPublicacao = key.startsWith('publicacoes/');\n        const bucketName = isPublicacao ? process.env.BUCKET_PUBLICACOES : process.env.BUCKET_AVATARES;\n        if (!bucketName) {\n            console.error('Bucket não configurado');\n            return false;\n        }\n        console.log(`Excluindo imagem do S3: bucket=${bucketName}, key=${key}`);\n        // Preparar o comando para exclusão\n        const deleteParams = {\n            Bucket: bucketName,\n            Key: key\n        };\n        // Executar a exclusão\n        await s3Client.send(new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.DeleteObjectCommand(deleteParams));\n        console.log('Imagem excluída do S3 com sucesso');\n        return true;\n    } catch (error) {\n        console.error('Erro ao excluir imagem do S3:', error);\n        return false;\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NlcnZpY2VzL2V4Y2x1aXJJbWFnZW1TMy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBbUU7QUFFbkUsNkJBQTZCO0FBQzdCLE1BQU1FLFNBQVNDLFFBQVFDLEdBQUcsQ0FBQ0MsVUFBVSxJQUFJO0FBQ3pDLE1BQU1DLGNBQWNILFFBQVFDLEdBQUcsQ0FBQ0csaUJBQWlCLElBQUk7QUFDckQsTUFBTUMsa0JBQWtCTCxRQUFRQyxHQUFHLENBQUNLLHFCQUFxQixJQUFJO0FBRTdELE1BQU1DLFdBQVcsSUFBSVYsd0RBQVFBLENBQUM7SUFDNUJFO0lBQ0FTLGFBQWE7UUFDWEw7UUFDQUU7SUFDRjtBQUNGO0FBRUE7Ozs7Q0FJQyxHQUNELE1BQU1JLGtCQUFrQixDQUFDQztJQUN2QixJQUFJO1FBQ0YsK0NBQStDO1FBQy9DLE1BQU1DLG1CQUFtQkQsSUFBSUUsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO1FBRTFDLHVDQUF1QztRQUN2QyxNQUFNQyxtQkFBbUJiLFFBQVFDLEdBQUcsQ0FBQ2EsaUJBQWlCO1FBQ3RELElBQUlELG9CQUFvQkgsSUFBSUssUUFBUSxDQUFDRixtQkFBbUI7WUFDdEQsdURBQXVEO1lBQ3ZELE1BQU1HLFNBQVNMLGlCQUFpQkMsS0FBSyxDQUFDLEdBQUdDLGlCQUFpQixDQUFDLENBQUM7WUFDNUQsT0FBT0csT0FBT0MsTUFBTSxHQUFHLElBQUlELE1BQU0sQ0FBQyxFQUFFLEdBQUc7UUFDekM7UUFFQSwrQkFBK0I7UUFDL0IsSUFBSU4sSUFBSUssUUFBUSxDQUFDLHVCQUF1QjtZQUN0Qyw2REFBNkQ7WUFDN0QsTUFBTUMsU0FBU0wsaUJBQWlCQyxLQUFLLENBQUM7WUFDdEMsT0FBT0ksT0FBT0MsTUFBTSxHQUFHLElBQUlELE1BQU0sQ0FBQyxFQUFFLEdBQUc7UUFDekM7UUFFQSxPQUFPO0lBQ1QsRUFBRSxPQUFPRSxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQywrQkFBK0JBO1FBQzdDLE9BQU87SUFDVDtBQUNGO0FBRUE7Ozs7Q0FJQyxHQUNNLE1BQU1FLGtCQUFrQixPQUFPVjtJQUNwQyxJQUFJO1FBQ0YsSUFBSSxDQUFDQSxLQUFLO1lBQ1JTLFFBQVFELEtBQUssQ0FBQztZQUNkLE9BQU87UUFDVDtRQUVBLHlDQUF5QztRQUN6QyxNQUFNRyxNQUFNWixnQkFBZ0JDO1FBQzVCLElBQUksQ0FBQ1csS0FBSztZQUNSRixRQUFRRCxLQUFLLENBQUMsMENBQTBDUjtZQUN4RCxPQUFPO1FBQ1Q7UUFFQSxpREFBaUQ7UUFDakQsTUFBTVksZUFBZUQsSUFBSUUsVUFBVSxDQUFDO1FBQ3BDLE1BQU1DLGFBQWFGLGVBQ2Z0QixRQUFRQyxHQUFHLENBQUN3QixrQkFBa0IsR0FDOUJ6QixRQUFRQyxHQUFHLENBQUN5QixlQUFlO1FBRS9CLElBQUksQ0FBQ0YsWUFBWTtZQUNmTCxRQUFRRCxLQUFLLENBQUM7WUFDZCxPQUFPO1FBQ1Q7UUFFQUMsUUFBUVEsR0FBRyxDQUFDLENBQUMsK0JBQStCLEVBQUVILFdBQVcsTUFBTSxFQUFFSCxLQUFLO1FBRXRFLG1DQUFtQztRQUNuQyxNQUFNTyxlQUFlO1lBQ25CQyxRQUFRTDtZQUNSTSxLQUFLVDtRQUNQO1FBRUEsc0JBQXNCO1FBQ3RCLE1BQU1kLFNBQVN3QixJQUFJLENBQUMsSUFBSWpDLG1FQUFtQkEsQ0FBQzhCO1FBQzVDVCxRQUFRUSxHQUFHLENBQUM7UUFDWixPQUFPO0lBQ1QsRUFBRSxPQUFPVCxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxpQ0FBaUNBO1FBQy9DLE9BQU87SUFDVDtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIkM6XFxQcm9qZXRvcyBHaXRcXERldmFyaWFcXERldmFncmFtLU5vZGVcXHNlcnZpY2VzXFxleGNsdWlySW1hZ2VtUzMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUzNDbGllbnQsIERlbGV0ZU9iamVjdENvbW1hbmQgfSBmcm9tICdAYXdzLXNkay9jbGllbnQtczMnO1xuXG4vLyBDb25maWd1cmHDp8OjbyBkbyBjbGllbnRlIFMzXG5jb25zdCByZWdpb24gPSBwcm9jZXNzLmVudi5BV1NfUkVHSU9OIHx8ICd1cy1lYXN0LTEnO1xuY29uc3QgYWNjZXNzS2V5SWQgPSBwcm9jZXNzLmVudi5BV1NfQUNDRVNTX0tFWV9JRCB8fCAnJztcbmNvbnN0IHNlY3JldEFjY2Vzc0tleSA9IHByb2Nlc3MuZW52LkFXU19TRUNSRVRfQUNDRVNTX0tFWSB8fCAnJztcblxuY29uc3QgczNDbGllbnQgPSBuZXcgUzNDbGllbnQoe1xuICByZWdpb24sXG4gIGNyZWRlbnRpYWxzOiB7XG4gICAgYWNjZXNzS2V5SWQsXG4gICAgc2VjcmV0QWNjZXNzS2V5XG4gIH1cbn0pO1xuXG4vKipcbiAqIEV4dHJhaSBvIG5vbWUgZG8gYXJxdWl2byAoa2V5KSBkZSB1bWEgVVJMIGRvIFMzIG91IENsb3VkRnJvbnRcbiAqIEBwYXJhbSB1cmwgVVJMIGRhIGltYWdlbVxuICogQHJldHVybnMgTm9tZSBkbyBhcnF1aXZvIChrZXkpIHBhcmEgbyBTM1xuICovXG5jb25zdCBleHRyYWlyS2V5RGFVcmwgPSAodXJsOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBSZW1vdmVyIHBhcsOibWV0cm9zIGRlIHF1ZXJ5IChjb21vIHRpbWVzdGFtcClcbiAgICBjb25zdCB1cmxTZW1QYXJhbWV0cm9zID0gdXJsLnNwbGl0KCc/JylbMF07XG4gICAgXG4gICAgLy8gVmVyaWZpY2FyIHNlIMOpIHVtYSBVUkwgZG8gQ2xvdWRGcm9udFxuICAgIGNvbnN0IGNsb3VkRnJvbnREb21haW4gPSBwcm9jZXNzLmVudi5DTE9VREZST05UX0RPTUFJTjtcbiAgICBpZiAoY2xvdWRGcm9udERvbWFpbiAmJiB1cmwuaW5jbHVkZXMoY2xvdWRGcm9udERvbWFpbikpIHtcbiAgICAgIC8vIEZvcm1hdG86IGh0dHBzOi8vY2xvdWRmcm9udC5kb21haW4vcGFzdGEvYXJxdWl2by5qcGdcbiAgICAgIGNvbnN0IHBhcnRlcyA9IHVybFNlbVBhcmFtZXRyb3Muc3BsaXQoYCR7Y2xvdWRGcm9udERvbWFpbn0vYCk7XG4gICAgICByZXR1cm4gcGFydGVzLmxlbmd0aCA+IDEgPyBwYXJ0ZXNbMV0gOiBudWxsO1xuICAgIH1cbiAgICBcbiAgICAvLyBWZXJpZmljYXIgc2Ugw6kgdW1hIFVSTCBkbyBTM1xuICAgIGlmICh1cmwuaW5jbHVkZXMoJy5zMy5hbWF6b25hd3MuY29tLycpKSB7XG4gICAgICAvLyBGb3JtYXRvOiBodHRwczovL2J1Y2tldC5zMy5hbWF6b25hd3MuY29tL3Bhc3RhL2FycXVpdm8uanBnXG4gICAgICBjb25zdCBwYXJ0ZXMgPSB1cmxTZW1QYXJhbWV0cm9zLnNwbGl0KCcuczMuYW1hem9uYXdzLmNvbS8nKTtcbiAgICAgIHJldHVybiBwYXJ0ZXMubGVuZ3RoID4gMSA/IHBhcnRlc1sxXSA6IG51bGw7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBudWxsO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gYW8gZXh0cmFpciBrZXkgZGEgVVJMOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcblxuLyoqXG4gKiBFeGNsdWkgdW1hIGltYWdlbSBkbyBTM1xuICogQHBhcmFtIHVybCBVUkwgZGEgaW1hZ2VtIGEgc2VyIGV4Y2x1w61kYVxuICogQHJldHVybnMgdHJ1ZSBzZSBhIGV4Y2x1c8OjbyBmb2kgYmVtLXN1Y2VkaWRhLCBmYWxzZSBjYXNvIGNvbnRyw6FyaW9cbiAqL1xuZXhwb3J0IGNvbnN0IGV4Y2x1aXJJbWFnZW1TMyA9IGFzeW5jICh1cmw6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICB0cnkge1xuICAgIGlmICghdXJsKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdVUkwgZGEgaW1hZ2VtIG7Do28gZm9ybmVjaWRhJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gRXh0cmFpciBvIG5vbWUgZG8gYXJxdWl2byAoa2V5KSBkYSBVUkxcbiAgICBjb25zdCBrZXkgPSBleHRyYWlyS2V5RGFVcmwodXJsKTtcbiAgICBpZiAoIWtleSkge1xuICAgICAgY29uc29sZS5lcnJvcignTsOjbyBmb2kgcG9zc8OtdmVsIGV4dHJhaXIgYSBrZXkgZGEgVVJMOicsIHVybCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gRGV0ZXJtaW5hciBvIGJ1Y2tldCBjb20gYmFzZSBubyBwcmVmaXhvIGRhIGtleVxuICAgIGNvbnN0IGlzUHVibGljYWNhbyA9IGtleS5zdGFydHNXaXRoKCdwdWJsaWNhY29lcy8nKTtcbiAgICBjb25zdCBidWNrZXROYW1lID0gaXNQdWJsaWNhY2FvIFxuICAgICAgPyBwcm9jZXNzLmVudi5CVUNLRVRfUFVCTElDQUNPRVMgXG4gICAgICA6IHByb2Nlc3MuZW52LkJVQ0tFVF9BVkFUQVJFUztcblxuICAgIGlmICghYnVja2V0TmFtZSkge1xuICAgICAgY29uc29sZS5lcnJvcignQnVja2V0IG7Do28gY29uZmlndXJhZG8nKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhgRXhjbHVpbmRvIGltYWdlbSBkbyBTMzogYnVja2V0PSR7YnVja2V0TmFtZX0sIGtleT0ke2tleX1gKTtcblxuICAgIC8vIFByZXBhcmFyIG8gY29tYW5kbyBwYXJhIGV4Y2x1c8Ojb1xuICAgIGNvbnN0IGRlbGV0ZVBhcmFtcyA9IHtcbiAgICAgIEJ1Y2tldDogYnVja2V0TmFtZSxcbiAgICAgIEtleToga2V5XG4gICAgfTtcblxuICAgIC8vIEV4ZWN1dGFyIGEgZXhjbHVzw6NvXG4gICAgYXdhaXQgczNDbGllbnQuc2VuZChuZXcgRGVsZXRlT2JqZWN0Q29tbWFuZChkZWxldGVQYXJhbXMpKTtcbiAgICBjb25zb2xlLmxvZygnSW1hZ2VtIGV4Y2x1w61kYSBkbyBTMyBjb20gc3VjZXNzbycpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gYW8gZXhjbHVpciBpbWFnZW0gZG8gUzM6JywgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTsiXSwibmFtZXMiOlsiUzNDbGllbnQiLCJEZWxldGVPYmplY3RDb21tYW5kIiwicmVnaW9uIiwicHJvY2VzcyIsImVudiIsIkFXU19SRUdJT04iLCJhY2Nlc3NLZXlJZCIsIkFXU19BQ0NFU1NfS0VZX0lEIiwic2VjcmV0QWNjZXNzS2V5IiwiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIiwiczNDbGllbnQiLCJjcmVkZW50aWFscyIsImV4dHJhaXJLZXlEYVVybCIsInVybCIsInVybFNlbVBhcmFtZXRyb3MiLCJzcGxpdCIsImNsb3VkRnJvbnREb21haW4iLCJDTE9VREZST05UX0RPTUFJTiIsImluY2x1ZGVzIiwicGFydGVzIiwibGVuZ3RoIiwiZXJyb3IiLCJjb25zb2xlIiwiZXhjbHVpckltYWdlbVMzIiwia2V5IiwiaXNQdWJsaWNhY2FvIiwic3RhcnRzV2l0aCIsImJ1Y2tldE5hbWUiLCJCVUNLRVRfUFVCTElDQUNPRVMiLCJCVUNLRVRfQVZBVEFSRVMiLCJsb2ciLCJkZWxldGVQYXJhbXMiLCJCdWNrZXQiLCJLZXkiLCJzZW5kIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./services/excluirImagemS3.ts\n");

/***/ }),

/***/ "@aws-sdk/client-s3":
/*!*************************************!*\
  !*** external "@aws-sdk/client-s3" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require("@aws-sdk/client-s3");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FexcluirPublicacao&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5CexcluirPublicacao.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();